<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Paul Vorbach</title>
    <link rel="stylesheet" href="/res/milten.css">
    <link rel="icon" href="/favicon.ico">
    <link rel="alternate" type="application/atom+xml" href="/log/feed.xml"
      title="Article feed">
    <link rel="alternate" type="application/atom+xml"
      href="/log/comment-feed.xml" title="Comment feed">
    <meta name="author" content="Paul Vorbach">
    <meta name="keywords" content="development, web, node.js,
      ccala, github, Paul Vorbach, Paul Rafael Vorbach, pvorb, pvorbach">
    <style>#top { font-size: 3em }</style>
  </head>
  <body>
    <header id="top">Paul Vorbach</header>
    <nav id="nav">
      <ul id="branches">
        <li><a href="/log/">Blog</a>
        <li><a href="/info/">Info</a>
      </ul>
      <ol id="path">
        <li>vorb.de
      </ol>
      <ol id="access">
        <li><a href="#top" title="To the top" id="back">↑</a>
        <li><a href="#nav">Navigation</a>
        <li><a href="#content">Content</a>
      </ol>
    </nav>
    <section id="content" class="digest">
      <article class="intro">
        <h1>Hi,</h1>
        <p>my name is Paul. I live near Würzburg, Germany,
        where I’m currently working on my bachelor’s degree in
        <a href="http://www.informatik.uni-wuerzburg.de/">Computer Science</a>.
        <p>I’m interested in web development and design. Recently, much of
        my time is spent on server-side development with
        <a href="http://nodejs.org/" title="Node.js">JavaScript</a>,
        <a href="http://scala-lang.org/">Scala</a> and
        <a href="http://www.oracle.com/technetwork/java/index.html">Java</a>.
        <p>You can also</p>
        <ul>
          <li><p>follow me on <img src="/res/github-icon.png">
            <a href="https://github.com/pvorb">Github</a>. Almost all of my
            personal projects are hosted on this website. The majority of them
            is licensed under a <a href="/license/mit.html">MIT license</a>.</p>
          <li><p>follow me on <img src="/res/twitter-icon.png">
            <a href="https://twitter.com/pvorb">Twitter</a>, where I irregularly
            post things that I find newsworthy.</p>
        </ul>
      </article>
      <section class="log">
        <h1>Weblog</h1>
        <p>Most of the articles in the <a href="/log/">blog</a> are in German,
        although there may be one or the other English article.</p>
        <p>Here is the newest article:</p>

        <article lang="en">
          <header>

            <figure class="teaser">
              <a href="/log/2012/03/bread.html"><img src="log/2012/03/windmill.jpg"></a>
            </figure>

            <h2><a href="/log/2012/03/bread.html">Bread</a></h2>
            <p class="meta">2012-03-07</p>
          </header>
          <section>
            <p>In diesem Artikel will ich <a href="https://github.com/pvorb/node-bread">Bread</a> und was dazugehört auf technischer Ebene erläutern.</p>
<h2 id="statisches-html">Statisches HTML</h3>
<p>Prinzipiell war ja die Idee von ben_ nicht schlecht, <a href="http://anmutunddemut.de/2010/05/18/the-anmut-of-static-html.html">direkt statische HTML-Dateien zu schreiben</a>. Ich habe das vor zirka einem Jahr schon mit <a href="https://github.com/pvorb/php-yuki">Yuki</a> versucht, aber kaum zwei Wochen durchgehalten. Das Problem war, dass ich zunächst sowohl den Blog-Index als auch den Feed von Hand schreiben musste. Das macht einfach keinen Spaß und ich bewundere ben_ dafür, dass er das über ein Jahr so durchgehalten hat. (Auch wenn bei ihm zumindest der Feed automatisch generiert wurde.)</p>
<h2 id="markdown">Markdown</h3>
<p>Was das Schreiben angeht, habe ich mich dann für <a href="http://konnexus.net/2010/10/blogracer">Konstantins Ansatz</a> mit <a href="http://daringfireball.net/projects/markdown/">Markdown</a> als Markup-Sprache entschieden. Markdown finde ich ganz vorzüglich zum Schreiben von allen möglichen Texten, weil es dem Schreiben nicht im Weg steht. Das scheinen in den letzten Jahren auch einige andere bemerkt zu haben und so ist Markdown an <a href="http://github.github.com/github-flavored-markdown/">allen</a> <a href="http://stackoverflow.com/editing-help">möglichen</a> <a href="http://www.iawriter.com/">Ecken</a> <a href="http://jekyllrb.com/">zu</a> <a href="https://github.com/millermedeiros/mdoc">finden</a>.</p>
<h2 id="umsetzung">Umsetzung</h3>
<p>Ich habe Bread für <a href="http://nodejs.org/">Node.js</a> geschrieben. Das hat mehrere Gründe:</p>
<ol style="list-style-type: decimal">
<li>Node.js hat ein paar interessante Konzepte, die mir sofort eingeleuchtet haben, und die wirklich Sinn ergeben. Dazu vielleicht an anderer Stelle mehr.</li>
<li>Node.js ist eine sehr schlanke Plattform. Da JavaScript einen kleinen Sprachkern hat, gibt es kaum unnötigen Balast.</li>
<li>Node.js hat ein sehr komfortables Modulsystem. Für viele Dinge gibt es schon fertige Module, die einfach installiert und verwendet werden können. Außerdem kann man in JavaScript auf sehr einfache Weise sehr modular programmieren.</li>
<li>Ich finde PHP auf Dauer ziemlich langweilig. Es ist auch immer nützlich, neues zu lernen.</li>
</ol>
<p>Da es sich anbietet, JavaScript-Programme modular zu schreiben, besteht Bread selbst aus einigen kleineren Modulen:</p>
<ul>
<li><p>Zunächst sei einmal <a href="https://github.com/pvorb/node-dive">Dive</a> genannt. Dive macht nichts anderes, als eine Ordnerstruktur zu durchlaufen und für jede Datei, die eine bestimmte Dateiendung hat, eine Aktion auszuführen.</p></li>
<li><p>Darauf baut <a href="https://github.com/pvorb/node-bake">Bake</a> auf. Bake definiert die von Dive ausgeführte Aktion so:</p>
<blockquote>
<p>„Wenn die Dateiendung <code>.txt</code> ist, wandle den Text in HTML um und schreibe das Ergebnis in die zugehörige HTML-Datei.“</p>
</blockquote>
<p>Zusätzlich werden Zusatzinformationen wie die Schlagwörter oder das Datum vom Anfang der Textdateien gelesen und in einer Datenbank (in meinem Fall <a href="http://mongodb.org/">MongoDB</a>) abgelegt.</p></li>
<li><p>Nachdem die Dateien alle Transformiert wurden, werden noch Index-Dateien und Tag-Seiten erstellt. Dafür wird die Datenbank verwendet. Hieraus können die benötigten Informationen auf einfache Weise bereitgestellt werden.</p></li>
<li><p>Sowohl für das Generieren der Artikel als auch für die anderen HTML-Dateien werden <a href="https://github.com/vorbach/vorb.de/tree/master/.conf/templates">Templates</a> mit <a href="http://embeddedjs.com/">embedded JavaScript</a> verwendet, weil EJS die selben Prinzipien wie PHP verfolgt und ich PHP für die Template-Sprache schlechthin halte.</p></li>
</ul>
<p>Das alles lässt sich mit dem <a href="http://npmjs.org/">Node package manager</a> prima so zusammenklöppeln, dass man nur noch Node.js und MongoDB und installiert zu haben braucht. Dann kann man bread und alles was dazu gehört ganz bequem per Kommandozeile mit <code>npm install -g bread</code> installieren.</p>
<p>Anschließend braucht man nur noch in das Verzeichnis zu wechseln, das die Texte enthält und dann <code>bread</code> zu starten. Das Programm holt sich die benötigten [Informationen zur Konfiguration][bread.json] aus dem [Verzeichnis <code>.conf/</code>][bread-conf] und legt sofort mit dem Übersetzen los.</p>
<p>Hier mal beispielhaft, wie so ein Aufruf dann konkret ausschaut:</p>
<pre><code>$ bread
Beginning to bake c:\web\vorb.de\public.
  * c:\web\vorb.de\public\log\blogroll.html written.
  * c:\web\vorb.de\public\info\markdown.de.html written.
  * c:\web\vorb.de\public\info\contact.html written.
  * c:\web\vorb.de\public\log\2012\02\node-and-npm-on-debian.html written.
  * c:\web\vorb.de\public\license\mit.html written.
  * c:\web\vorb.de\public\log\subscription.html written.
  * c:\web\vorb.de\public\log\2012\03\was-lange-waehrt.html written.
  * c:\web\vorb.de\public\info\markdown.en.html written.
  * c:\web\vorb.de\public\info\index.html written.
  * c:\web\vorb.de\public\log\2012\02\beginning.html written.
  * c:\web\vorb.de\public\log\2012\03\bread.html written.
Content files written.
Beginning to write index and tag files.
  * c:\web\vorb.de\public\log\tag\index.html written.
  * c:\web\vorb.de\public\index.html written.
  * c:\web\vorb.de\public\log\feed.xml written.
  * c:\web\vorb.de\public\log\tag\linux.html written.
Tag files written.
  * c:\web\vorb.de\public\log\tag\dev.html written.
  * c:\web\vorb.de\public\log\index.html written.
Index files written.
  * c:\web\vorb.de\public\log\tag\weblog.html written.
  * c:\web\vorb.de\public\log\tag\html.html written.
  * c:\web\vorb.de\public\log\tag\markdown.html written.
  * c:\web\vorb.de\public\log\tag\cms.html written.
  * c:\web\vorb.de\public\log\tag\misc.html written.
  * c:\web\vorb.de\public\log\2011\index.html written.
  * c:\web\vorb.de\public\log\2012\index.html written.
  * c:\web\vorb.de\public\log\2012\02\index.html written.
  * c:\web\vorb.de\public\log\2011\09\index.html written.
  * c:\web\vorb.de\public\log\2012\03\index.html written.
Autoindex files written.
ok
  * c:\web\vorb.de\public\log\tag\nodejs.html written.
  * c:\web\vorb.de\public\log\tag\english.html written.
  * c:\web\vorb.de\public\log\tag\bread.html written.
  * c:\web\vorb.de\public\log\tag\deutsch.html written.</code></pre>
<h2 id="vor--und-nachteile">Vor- und Nachteile</h3>
<p>Natürlich bringt das System seine Vor- und Nachteile mit sich.</p>
<h3 id="vorteile">Vorteile</h4>
<dl>
<dt>Komfort:</dt>
<dd><p>Neue Artikel lassen sich einfach und schnell schreiben. Markdown eignet sich hervorragend genau für diesen Zweck.</p>
</dd>
<dt>Standortunabhängigkeit:</dt>
<dd><p>Die HTML-Dateien lassen sich eins zu eins auf einen beliebigen Webserver übertragen. Damit kann man das Blog dann auf jedem Billig-Hoster veröffentlichen, solange dieser einen FTP-Zugang anbietet. Außerdem lassen sich, wie ben_ schon vor einer Ewigkeit erkannt hat, alle Dateien prima mit Git sichern und versionieren.</p>
<p>Dass Node.js und MongoDB benötigt werden ist hierfür kein Problem. Die Website kann (und das wird von mir auch so betrieben) komplett auf dem Client generiert werden. Es reicht, die Resultate per FTP auf den Server zu schieben. Die MongoDB wird sowieso mit jedem Aufruf neugestartet und wird somit auch nicht auf dem Server benötigt.</p>
</dd>
<dt>Editor der Wahl:</dt>
<dd><p>Web-Editoren sind Mist. Viel komfortabler lassen sich Texte mit den Tools schreiben, die man bei sich auf dem Rechner laufen lassen kann.</p>
<p>Da mir leider der <a href="http://www.iawriter.com/">iAwriter</a> wegen mangelnder Unterstützung für Windows noch verwehrt bleibt, kommt aktuell <a href="http://vim.org/">Vim</a> zum Einsatz. Damit und mit der Kommandozeile lässt sich sehr komfortabel und schnell arbeiten.</p>
</dd>
</dl>
<h3 id="nachteile">Nachteile</h4>
<p>Nachteile sehe ich im Moment in folgenden Bereichen:</p>
<dl>
<dt>Datenbank:</dt>
<dd><p>Die Tatsache, dass ich eine Datenbank brauche, um die Inhalte so zu generieren wie ich sie brauche, stört mich. Das muss auch besser und einfacher gehen. Der Einsatz von MongoDB ist eher eine Notlösung.</p>
</dd>
<dt>Langer Übersetzungsprozess:</dt>
<dd><p>Noch läuft der gesamte Übersetzungsprozess innerhalb von – mal schnell ausprobieren – weniger als zwei Sekunden ab. Fraglich ist jedoch, wie das aussieht, wenn ich erst mal mehrere hundert oder gar tausend Artikel geschrieben habe, sieht das aber anders aus. Dafür muss ich mir noch eine Lösung einfallen lassen.</p>
</dd>
<dt>Komplexität:</dt>
<dd><p>Die vielen Module (und ich habe noch ein paar wichtige ausgelassen) führen zwangsläufig zu einer selbst erschaffenen Komplexität. Teilweise ist auch der Code selbst etwas kompliziert geworden, woran Node.js mit schuld ist. Da in Node.js sämtliche <em>I/O asynchron</em> abläuft, benötigt man viele Closures, was schon mal zu sechs Schachtelungsebenen führen kann. Das ist suboptimal und für Laien schlecht zu verstehen.</p>
<p>Da ich das meiste aber selbst geschrieben habe, komme ich recht gut mit dieser Komplexität klar. Schön wäre aber, wenn ich da in Zukunft einiges vereinfachen könnte.</p>
</dd>
</dl>
<h2 id="was-noch-kommt">Was noch kommt</h3>
<p>Ein paar Sachen habe ich vorerst noch nicht beschrieben:</p>
<ul>
<li>Veröffentlichen mit Git</li>
<li>Kommentare und Pingbacks</li>
</ul>
<p>Das soll aber nicht lange so bleiben. Wer nicht warten kann, kann sich auch gerne das <a href="https://github.com/vorbach/vorb.de">Repository zu dieser Website</a> auf Github anschauen. Leider musste ich das in eine eigene <em>„Organization“</em> auslagern, weil ich nicht mit dem 300 MB-Limit ausgekommen bin. ;)</p>
<h2 id="standing-on-the-shoulders-of-giants">Standing on the shoulders of giants</h3>
<p>Wie der <a href="http://konnexus.net/2010/10/blogracer">Blogracer</a> steht auch Bread auf den Schultern von Giganten. Ich möchte mich bei <a href="http://anmutunddemut.de/">ben_</a>, <a href="http://konnexus.net/">Konstantin</a> und <a href="http://blog.fymmie.de/">Maurice</a> sowie allen Kommentatoren auf den jeweiligen Blogs bedanken, die einige wertvolle Gedanken zu diesem Thema zusammengetragen haben.</p>
<p>Wer sich für die Hintergründe interessiert, wird unter anderem hier werden:</p>
<ul>
<li><a href="http://anmutunddemut.de/thema/serie/on-my-way-to-heimweh">On my way to heimweh</a></li>
<li><a href="http://konnexus.net/lexicon/blogracer">Blogracer</a></li>
<li><a href="http://blog.fymmie.de/thema/nihil">Nihil</a></li>
</ul>
<p>So, jetzt muss ich mich aber mal zügeln. Das mag ja sonst keiner mehr lesen. Ich freue mich schon auf die Diskussion. <em>Was meint ihr dazu?</em></p>

          </section>
        </article>

        <p><a href="/log/">More articles »</a></p>
      </section>
    </section>
    <footer id="about">
      <p>© 2008-2012 – Paul Vorbach.
        <a href="/info/contact.html">Contact</a>.</p>
    </footer>
  </body>
</html>
